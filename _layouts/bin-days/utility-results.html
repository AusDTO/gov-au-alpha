---
layout: default
---

<div class="post">
  <div class="container">
    <div class="column main-col col-xs-12 col-md-12">
      <div class="row page-content">
        {{ content }}
      </div>
    </div>
  </div>
</div>

<script>
  $(function() {
    var streetNumber = DTO.Forms.MockPersistence.getParameterByName('street-number');
    var streetName = DTO.Forms.MockPersistence.getParameterByName('route');
    var suburb = DTO.Forms.MockPersistence.getParameterByName('locality');
    var state = DTO.Forms.MockPersistence.getParameterByName('administrative-area-level-1');
    var postcode = DTO.Forms.MockPersistence.getParameterByName('postcode');
    var imgAddress = encodeURIComponent(streetNumber + '+' + streetName + '+' + suburb + '+' + state);
    var lat = DTO.Forms.MockPersistence.getParameterByName('lat');
    var lng = DTO.Forms.MockPersistence.getParameterByName('lng');

    formatedLongAddress();
    handleShortAddress();
    handleLongAddress();
    buildStaticImgURL();
    createLink();

    function handleLongAddress() {
      var longAddress = streetNumber + ' ' + streetName + ', ' + suburb  + ', ' + state + ' ' + postcode;
      var longAddressContainers = document.getElementsByClassName('long-address-holder');
      if (longAddressContainers.length > 0)
      {
        for (var i=0;i<longAddressContainers.length;i++) {
          longAddressContainers[i].innerHTML = longAddress;
        }
      }
    }

    function formatedLongAddress() {
      var formattedLongAddress = streetNumber + ' ' + streetName + ',<br />' + suburb  + ',<br />' + state + ' ' + postcode;
      var formattedLongAddressContainers = document.getElementsByClassName('formatted-long-address');
      if (formattedLongAddressContainers.length > 0)
      {
        for (var i=0;i<formattedLongAddressContainers.length;i++) {
          formattedLongAddressContainers[i].innerHTML = formattedLongAddress;
        }
      }
    }

    function handleShortAddress() {
      var shortAddress = streetNumber + ' ' + streetName + ', ' + suburb ;
      var shortAddressContainers = document.getElementsByClassName('short-address-holder');
      if (shortAddressContainers.length > 0)
      {
        for (var i=0;i<shortAddressContainers.length;i++) {
          shortAddressContainers[i].innerHTML = shortAddress;
        }
      }
    }

    function buildStaticImgURL() {
      var imgURL = "https://maps.googleapis.com/maps/api/staticmap?center="+imgAddress+"&zoom=19&size=400x300";
      var imgTag = "<img src="+imgURL+" />";
      var imgHolder = document.getElementById('mapImgHolder');
      if (imgHolder)
      {
        imgHolder.innerHTML = imgTag;
      }
    }

    function createLink() {
      var queryString = window.location.href.slice(window.location.href.indexOf('?') + 1);
      var linkHolders = document.getElementsByClassName('property-detail-link');

      if (linkHolders.length > 0)
      {
        for (var i=0;i<linkHolders.length;i++) {
          linkHolders[i].href = "property-details.html?"+queryString;
        }
      }
    }
  });
</script>
