---
layout: three-column
title:  "Starting a business"
section: "Starting a business"
subsection: "Your details"
---
<h2>Your details</h2>

<div id="cardHolder">

</div>

<script>
$(function() {
  $.getJSON( "/js/localStorageMap.json", function( data ) {
    
    var o = null, n = null;
    var storageObj = null;
    var dataType = null;
    for (o in data) {
      storageObj = JSON.parse(localStorage.getItem(o));
      if (storageObj)
      {
        for (n in data[o])
        {
          if (storageObj[n] === undefined && storageObj[n] !== null)
          {
            storageObj[n] = data[o][n]['default'];
          }

          if( Object.prototype.toString.call( data[o][n]['default'] ) === '[object Array]' )
          {
            if (storageObj[n].constructor !== Array)
            {
              storageObj[n] = storageObj[n].split(',');
            }
            if (storageObj[n].length > 0)
            {
              // renderMultiple();
              console.log(storageObj[n]);
              renderMultiple(storageObj[n],data[o][n]);
            }
          }
          else
          {
            // renderSingle();
            if (storageObj[n])
            {
              renderSingle(storageObj[n],data[o][n]);
            }
          }
        }
      }
    }
  });

  function renderSingle(storageVal,mapObj)
  {
    var warnClass = '', changeText = 'Change answer';
    if (!storageVal) {
      warnClass = ' warn';
      storageVal = '-';
      changeText = 'Add answer';
    }
    var renderHTML = '<div class="steps'+warnClass+'">';
    renderHTML += '<div class="step row">';
    renderHTML += '<h4>'+mapObj['title']+'</h4>';
    renderHTML += '<div class="single-container"><p>'+storageVal+'</p>';
    renderHTML += '<a href="#" class="change">'+changeText+'</a></div>'
    renderHTML += '</div>';
    renderHTML += '</div>';
    $(renderHTML).appendTo('#cardHolder');
  }

  function renderMultiple(storageArr,mapObj)
  {
    var warnClass = '', changeText = 'Change answer';
    var holderClass = 'multi-container';
    var renderHTML = '';
    var topBorderClass = ' no-top-border';
    var i = 0;
    if (storageArr.length === 0) {
      warnClass = ' warn';
      storageArr[0] = '-';
      changeText = 'Add answer';
      holderClass = 'single-container';
    }
    else if (storageArr.length == 1)
    {
      holderClass = 'single-container';      
    }
    renderHTML = '<div class="steps'+warnClass+'">';
    renderHTML += '<div class="step row">';
    renderHTML += '<h4>'+mapObj['title']+'</h4>';
    for (i=0;i<storageArr.length;i++)
    {
      if (storageArr[i].trim().length > 0)
      {
        renderHTML += '<div class="'+holderClass+topBorderClass+'"><p>'+storageArr[i]+'</p>';
        renderHTML += '<a href="#" class="change">'+changeText+'</a></div>';
        topBorderClass = '';
      }
    }
    renderHTML += '</div>';
    renderHTML += '</div>';
    $(renderHTML).appendTo('#cardHolder');
  }
});
</script>

